<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
	<title>Tastypie Tutorial: Working With Serializers</title>

	<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	<link type="text/css" rel="stylesheet" href="styles/sunlight.default.css">

	<link type="text/css" rel="stylesheet" href="styles/site.paper.css">

</head>

<body>

<div class="navbar navbar-default navbar-fixed-top ">
<div class="container">
	<div class="navbar-header">
		<a class="navbar-brand" href="index.html">Tastypie</a>
		<button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#topNavigation">
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
        </button>
	</div>
	<div class="navbar-collapse collapse" id="topNavigation">
		<ul class="nav navbar-nav">
			
			<li class="dropdown">
				<a href="modules.list.html" class="dropdown-toggle" data-toggle="dropdown">Modules<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="module-tastypie.html">tastypie</a></li><li><a href="module-tastypie_fields.html">tastypie/fields</a></li><li><a href="module-tastypie_fields_api.html">tastypie/fields/api</a></li><li><a href="module-tastypie_fields_array.html">tastypie/fields/array</a></li><li><a href="module-tastypie_fields_boolean.html">tastypie/fields/boolean</a></li><li><a href="module-tastypie_fields_char.html">tastypie/fields/char</a></li><li><a href="module-tastypie_fields_date.html">tastypie/fields/date</a></li><li><a href="module-tastypie_fields_datetime.html">tastypie/fields/datetime</a></li><li><a href="module-tastypie_fields_file.html">tastypie/fields/file</a></li><li><a href="module-tastypie_fields_filepath.html">tastypie/fields/filepath</a></li><li><a href="module-tastypie_fields_float.html">tastypie/fields/float</a></li><li><a href="module-tastypie_fields_integer.html">tastypie/fields/integer</a></li><li><a href="module-tastypie_fields_object.html">tastypie/fields/object</a></li><li><a href="module-tastypie_fields_related.html">tastypie/fields/related</a></li><li><a href="module-tastypie_lib.html">tastypie/lib</a></li><li><a href="module-tastypie_lib_api.html">tastypie/lib/api</a></li><li><a href="module-tastypie_lib_cache.html">tastypie/lib/cache</a></li><li><a href="module-tastypie_lib_class.html">tastypie/lib/class</a></li><li><a href="module-tastypie_lib_class_options.html">tastypie/lib/class/options</a></li><li><a href="module-tastypie_lib_constants.html">tastypie/lib/constants</a></li><li><a href="module-tastypie_lib_exceptions.html">tastypie/lib/exceptions</a></li><li><a href="module-tastypie_lib_http.html">tastypie/lib/http</a></li><li><a href="module-tastypie_lib_mime.html">tastypie/lib/mime</a></li><li><a href="module-tastypie_lib_paginator.html">tastypie/lib/paginator</a></li><li><a href="module-tastypie_lib_resource.html">tastypie/lib/resource</a></li><li><a href="module-tastypie_lib_resource_detail.html">tastypie/lib/resource/detail</a></li><li><a href="module-tastypie_lib_resource_list.html">tastypie/lib/resource/list</a></li><li><a href="module-tastypie_lib_resource_schema.html">tastypie/lib/resource/schema</a></li><li><a href="module-tastypie_lib_resource_validator.html">tastypie/lib/resource/validator</a></li><li><a href="module-tastypie_lib_resource_validator_querystring.html">tastypie/lib/resource/validator/querystring</a></li><li><a href="module-tastypie_lib_serializer.html">tastypie/lib/serializer</a></li><li><a href="module-tastypie_lib_throttle.html">tastypie/lib/throttle</a></li><li><a href="module-tastypie_lib_util.html">tastypie/lib/util</a></li><li><a href="module-tastypie_lib_validators.html">tastypie/lib/validators</a></li><li><a href="parent.module_js.html">parent.js</a></li>
				</ul>
			</li>
			
			<li class="dropdown">
				<a href="classes.list.html" class="dropdown-toggle" data-toggle="dropdown">Classes<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="module-lib_execpetions.BaseException.html">lib/execpetions.BaseException</a></li><li><a href="module-tastypie_lib_exceptions.ImproperlyConfigured.html">tastypie/lib/exceptions.ImproperlyConfigured</a></li><li><a href="module-tastypie_lib_exceptions.NotImplemented.html">tastypie/lib/exceptions.NotImplemented</a></li><li><a href="module-tastypie_lib_exceptions.ResourceFilterError.html">tastypie/lib/exceptions.ResourceFilterError</a></li><li><a href="module-tastypie_lib_exceptions.SerializationError.html">tastypie/lib/exceptions.SerializationError</a></li><li><a href="module-tastypie_lib_exceptions.UnsupportedFormat.html">tastypie/lib/exceptions.UnsupportedFormat</a></li><li><a href="module-tastypie_lib_paginator.Remote.html">tastypie/lib/paginator.Remote</a></li><li><a href="module-tastypie_lib_throttle.Memory.html">tastypie/lib/throttle.Memory</a></li><li><a href="module-tastypie_lib_validators.FormValidator.html">tastypie/lib/validators.FormValidator</a></li><li><a href="module-tastypie_lib_validators.JoiValidator.html">tastypie/lib/validators.JoiValidator</a></li><li><a href="module-tastypie_lib_validators.Validator.html">tastypie/lib/validators.Validator</a></li>
				</ul>
			</li>
			
			<li class="dropdown">
				<a href="tutorials.list.html" class="dropdown-toggle" data-toggle="dropdown">Tutorials<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="tutorial-getting-started.html">Getting Started</a></li><li><a href="tutorial-resources.html">Working With Resources</a></li><li><a href="tutorial-serializers.html">Working With Serializers</a></li><li><a href="tutorial-wfields.html">Working With Fields</a></li>
				</ul>
			</li>
			
		</ul>
        
            <div class="col-sm-3 col-md-3">
                <form class="navbar-form" role="search">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Search" name="q" id="search-input">
                        <div class="input-group-btn">
                            <button class="btn btn-default" id="search-submit"><i class="glyphicon glyphicon-search"></i></button>
                        </div>
                    </div>
                </form>
            </div>
        
	</div>

</div>
</div>


<div class="container" id="toc-content">
<div class="row">

	
	<div class="col-md-12">
	
		<div id="main">
			<section class="tutorial-section">

<header>
    

    <h2>Working With Serializers</h2>
</header>

<article>
    <h2>Serializtion Cycle</h2><p>Each Tastypie resource has a <a href="module-tastypie_lib_serializer.html">Serializer</a> instance which it uses internally to convert data between well formatted string and javascript objects. This behavior is defined in the <a href="module-tastypie_lib_serializer.html#serialize">serialize</a> and <a href="module-tastypie_lib_serializer.html#deserialize">deserialize</a> methods. A serializer class defines how<br>data is converted to and from a string. This is done via the <code>to_&lt;FORMAT&gt;</code> and <code>from_&lt;FORMAT&gt;</code> methods for each of the formats. For example, the default serializer defines the following methods:</p>
<ul>
<li><strong>to_json</strong> - Converts an object to a JSON string</li>
<li><strong>from_json</strong> - Converts a JSON string to a javascript object</li>
<li><strong>to_xml</strong> - Converts a javascript object to an XML string</li>
<li><strong>from_xml</strong> - Converts an XML String to a javascript object</li>
</ul>
<h4>Serialization</h4><p>Serialization is the act of converting a javascript object into a standard format string - JSON string, XML String, YAML String, etc. In the simplest case this is as simple as calling <code>JSON.stringify</code>. To add support for serialization of a new format, you must define the <code>to_</code> method on a serializer class.</p>
<pre class="prettyprint source lang-js:git"><code>var tastypie = require('tastypie')
  , Class    = tastypie.Class
  , Serializer = tastypie.Serializer
  , JSONSerializer
  ;

JSONSerializer = new Class({

    inherits: Serializer

    ,options:{
        content_types :{
            'application/json':'json'
        }
    }

    ,to_json: function( data, options, callback ){
        callback( null, JSON.stringify( data ) );
    }

});</code></pre><h3>Deserialization</h3><p>Deserialization is the act of converting a standard format string ( usually from user input ) into a javascript object. To add support for deserialization of a new format, you must define the <code>from_</code> method on a serializer class.</p>
<pre class="prettyprint source lang-js:git"><code>var tastypie = require('tastypie')
  , Class    = tastypie.Class
  , Serializer = tastypie.Serializer
  , JSONSerializer
  ;

JSONSerializer = new Class({

    inherits: Serializer

    ,options:{
        content_types :{
            'application/json':'json'
        }
    }

    ,from_json: function( data, callback ){
        callback( null, JSON.parse( data ) );
    }

});</code></pre><h2>XML Handling</h2><p>Tastypie 5.0 introduced the <code>strict</code> xml option for the default serializer which changes the way array elements are handled during serialization. When <code>strict mode</code> is set to <strong>false</strong>, Arrays are treated as an object of type array with repeating elements</p>
<pre class="prettyprint source"><code>var Serializer = require('./lib/serializer')
var s = new Serializer({xml:{strict: false}})
var data = {
    a:{
        b:[1,2,3]
        ,c:[{
            foo:'bar'
        },{
            bar:'baz'
        }]
    }
}
s.serialize(data ,'text/xml',function( err, result ){
    console.log( result )
});</code></pre><pre class="prettyprint source lang-html"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>
&lt;response>
 &lt;a type=&quot;object&quot;>
  &lt;b type=&quot;array&quot;>
   &lt;value type=&quot;number&quot;>1&lt;/value>
   &lt;value type=&quot;number&quot;>2&lt;/value>
   &lt;value type=&quot;number&quot;>3&lt;/value>
  &lt;/b>
  &lt;c type=&quot;array&quot;>
   &lt;object type=&quot;object&quot;>
    &lt;foo type=&quot;string&quot;>bar&lt;/foo>
   &lt;/object>
   &lt;object type=&quot;object&quot;>
    &lt;bar type=&quot;string&quot;>baz&lt;/bar>
   &lt;/object>
  &lt;/c>
 &lt;/a>
&lt;/response></code></pre><p>This has been the default behavior of the serializer since 1.0 of tastypie and was done in an effort to be in line with the behaviors of the python libraries. However, there are two problems that arise with this implementation. </p>
<ol>
<li>It is non standard XML format and may break existing XML parsing libaries in the wild</li>
<li>XML data sent to be deserialized by tastypie would be parsed incorrectly. ( see point #1 )</li>
</ol>
<p>For this reason, when strict mode is enabled arrays will be serialized as repeating elements. When in strict mode, XML responses sent from tastypie can be sent back in the same format as they were received</p>
<pre class="prettyprint source"><code>var Serializer = require('./lib/serializer')
var s = new Serializer()
var data = {
    a:{
        b:[1,2,3]
        ,c:[{
            foo:'bar'
        },{
            bar:'baz'
        }]
    }
}
s.serialize(data ,'text/xml',function( err, result ){
    console.log( result )
});</code></pre><pre class="prettyprint source lang-html"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>
&lt;response>
 &lt;a type=&quot;object&quot;>
  &lt;b type=&quot;number&quot;>1&lt;/b>
  &lt;b type=&quot;number&quot;>2&lt;/b>
  &lt;b type=&quot;number&quot;>3&lt;/b>
  &lt;c type=&quot;object&quot;>
   &lt;foo type=&quot;string&quot;>bar&lt;/foo>
  &lt;/c>
  &lt;c type=&quot;object&quot;>
   &lt;bar type=&quot;string&quot;>baz&lt;/bar>
  &lt;/c>
 &lt;/a>
&lt;/response></code></pre>
</article>

</section>

		</div>
	</div>

	<div class="clearfix"></div>

	

</div>
</div>


    <div class="modal fade" id="searchResults">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title">Search results</h4>
          </div>
          <div class="modal-body"></div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div>


<footer>


	<span class="copyright">
	Eric Satterwhite &copy; 2015
	</span>

<span class="jsdoc-message">
	Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a>
	
		on 2016-09-13T13:55:15-05:00
	
	using the <a href="https://github.com/docstrap/docstrap">DocStrap template</a>.
</span>
</footer>

<script src="scripts/docstrap.lib.js"></script>
<script src="scripts/toc.js"></script>

    <script type="text/javascript" src="scripts/fulltext-search-ui.js"></script>


<script>
$( function () {
	$( "[id*='$']" ).each( function () {
		var $this = $( this );

		$this.attr( "id", $this.attr( "id" ).replace( "$", "__" ) );
	} );

	$( ".tutorial-section pre, .readme-section pre, pre.prettyprint.source" ).each( function () {
		var $this = $( this );

		var example = $this.find( "code" );
		exampleText = example.html();
		var lang = /{@lang (.*?)}/.exec( exampleText );
		if ( lang && lang[1] ) {
			exampleText = exampleText.replace( lang[0], "" );
			example.html( exampleText );
			lang = lang[1];
		} else {
			var langClassMatch = example.parent()[0].className.match(/lang\-(\S+)/);
			lang = langClassMatch ? langClassMatch[1] : "javascript";
		}

		if ( lang ) {

			$this
			.addClass( "sunlight-highlight-" + lang )
			.addClass( "linenums" )
			.html( example.html() );

		}
	} );

	Sunlight.highlightAll( {
		lineNumbers : false,
		showMenu : true,
		enableDoclinks : true
	} );

	$.catchAnchorLinks( {
        navbarOffset: 10
	} );
	$( "#toc" ).toc( {
		anchorName  : function ( i, heading, prefix ) {
			return $( heading ).attr( "id" ) || ( prefix + i );
		},
		selectors   : "#toc-content h1,#toc-content h2,#toc-content h3,#toc-content h4",
		showAndHide : false,
		smoothScrolling: true
	} );

	$( "#main span[id^='toc']" ).addClass( "toc-shim" );
	$( '.dropdown-toggle' ).dropdown();

    $( "table" ).each( function () {
      var $this = $( this );
      $this.addClass('table');
    } );

} );
</script>



<!--Navigation and Symbol Display-->


<!--Google Analytics-->



    <script type="text/javascript">
        $(document).ready(function() {
            SearcherDisplay.init();
        });
    </script>


</body>
</html>